// The variables below are processed in './layouts/partials/css.html'
// when it's executed as template by Hugo pipes.
$page-background-color: {{ .Param "pageBackgroundColor" | default "#f1f1f1" }};
$base-color: {{ .Param "baseColor" | default "#1d1f38" }};
$special-color: {{ .Param "specialColor" | default "#2D3642" }};
$highlight-color: {{ .Param "highlightColor" | default "#5c8b59" }};
$text-color: {{ .Param "textColor" | default "#222" }};

$nav-background-color: {{ .Param "navBackgroundColor" | default "$special-color" }};
$nav-text-color: {{ .Param "navTextColor" | default "$page-background-color" }};
$algolia-search-box-color: {{ .Param "algoliaSearchBoxColor" | default "#444" }};
$algolia-search-box-icon-color: {{ .Param "algoliaSearchBoxIconColor" | default "#888" }};
$algolia-search-box-background-color: {{ .Param "algoliaSearchBoxBackgroundColor" | default "#fafafa" }};
$algolia-border-color: {{ .Param "algoliaBorderColor" | default "#e4e4e4" }};

$header-text-color: {{ .Param "headerTextColor" | default "$page-background-color" }};
$logo-color: {{ .Param "logoColor" | default "darken($page-background-color, 1)" }};
$bubble-color: {{ .Param "bubbleColor" | default "#fff" }};
$bubble-background-color: {{ .Param "bubbleBackgroundColor" | default "#ccc" }};
$bubble-hover-color: {{ .Param "bubbleHoverColor" | default "$highlight-color" }};

$article-background-color: {{ .Param "articleBackgroundColor" | default "#fff" }};
$meta-text-color: {{ .Param "metaTextColor" | default "#999" }};
$meta-border-color: {{ .Param "metaBorderColor" | default "#eee" }};
$continue-reading-hover-color: {{ .Param "continueReadingHoverColor" | default "$meta-text-color" }};

$footer-border-color: {{ .Param "footerBorderColor" | default "#eee" }};
$footer-background-color: {{ .Param "footerBackgroundColor" | default "rgba(#ffffff, 80)" }};
$footer-headline-color: {{ .Param "footerHeadlineColor" | default "#444" }};

// Dark mode
$dk-page-background-color: {{ .Param "dkPageBackgroundolor" | default "invert($page-background-color)" }};
$dk-base-color: {{ .Param "dkBaseColor" | default "$base-color" }};
$dk-special-color: {{ .Param "dkSpecialColor" | default "$special-color" }};
$dk-highlight-color: {{ .Param "dkHighlightColor" | default "saturate($highlight-color,20)" }};
$dk-text-color: {{ .Param "dkTextColor" | default "darken(invert($text-color),20)" }};

$dk-nav-background-color: {{ .Param "dkNavBackgroundColor" | default "$dk-special-color" }};
$dk-nav-text-color: {{ .Param "dkNavTextColor" | default "$dk-page-background-color" }};
$dk-algolia-search-box-color: {{ .Param "dkAlgoliaSearchBoxColor" | default "#444" }};
$dk-algolia-search-box-icon-color: {{ .Param "dkAlgoliaSearchBoxIconColor" | default "#888" }};
$dk-algolia-search-box-background-color: {{ .Param "dkAlgoliaSearchBoxBackgroundColor" | default "#fafafa" }};
$dk-algolia-border-color: {{ .Param "dkAlgoliaBorderColor" | default "#e4e4e4" }};

$dk-header-text-color: {{ .Param "dkHeaderTextColor" | default "darken($header-text-color,20)" }};
$dk-logo-color: {{ .Param "dkLogoColor" | default "darken(invert($dk-page-background-color),70)" }};
$dk-bubble-color: {{ .Param "dkBubbleColor" | default "$dk-logo-color" }};
$dk-bubble-background-color: {{ .Param "dkBubbleBackgroundColor" | default "lighter(invert($bubble-background-color),5)" }};
$dk-bubble-hover-color: {{ .Param "dkBubbleHoverColor" | default "$dk-highlight-color" }};

$dk-article-background-color: {{ .Param "dkArticleBackgroundColor" | default "invert($article-background-color)" }};
$dk-meta-text-color: {{ .Param "dkMetaTextColor" | default "invert($meta-text-color)" }};
$dk-meta-border-color: {{ .Param "dkMetaBorderColor" | default "invert($meta-text-color)" }};
$dk-continue-reading-hover-color: {{ .Param "dkContinueReadingHoverColor" | default "$dk-meta-text-color" }};

$dk-footer-border-color: {{ .Param "dkFooterBorderColor" | default "invert($footer-border-color)" }};
$dk-footer-background-color: {{ .Param "dkFooterBackgroundColor" | default "invert($footer-background-color)" }};
$dk-footer-headline-color: {{ .Param "dkFooterHeadlineColor" | default "darken(invert($footer-headline-color),5)" }};

@mixin featuredImage() {
  .featured-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 5;
    opacity: 0.25;
  }
}

.js {
  .no-js-message {
    display: none;
  }
}
.no-js {
  .no-js-hidden {
    display: none;
  }
  .no-js-message {
    display: block;
    padding: 2em;
    background-color: $dk-base-color;
    color: $dk-header-text-color;
    font-size: 0.9em;
    font-style: italic;
    text-align: center;
    
    &:first-line {
      font-weight: bold;
    }
  }

  nav {
    display: block !important;
  }
  .search,
  .toggler {
    display: none !important;
  }
  pre code {
    background: inherit;
    color: inherit;
  }
  .responsive-video {
    &.youtube, &.vimeo, &.peertube {
      height: auto !important;
      padding: 0 !important;
    }
  }
}

.bilberry-hugo-theme {
  background-color: $dk-page-background-color;
  color: $dk-text-color;
  a {
    color: inherit;
    &:hover {
      color: $dk-highlight-color;
    }
  }
  .highlight {
    pre {
      code {
        background-color: inherit;
      }
      .copy-button {
        background: $dk-page-background-color;
      }
    }
  }
  #back-to-top-button {
    color: $dk-base-color;
    background-color: $dk-bubble-color;
  }
  #back-to-top-button:hover {
    background-color: $dk-highlight-color;
  }

  // do not group these rules
  *::-webkit-input-placeholder {
    color: darken($dk-nav-text-color, 10);
  }
  *:-moz-placeholder {
    // FF 4-18
    color: darken($dk-nav-text-color, 10);
  }
  *::-moz-placeholder {
    // FF 19+
    color: darken($dk-nav-text-color, 10);
  }
  *:-ms-input-placeholder {
    // IE 10+
    color: darken($dk-nav-text-color, 10);
  }

  nav {
    background: $dk-nav-background-color;
    color: $dk-nav-text-color;
    ul {
      li {
        a.hover {
          color: $dk-bubble-hover-color;
        }
      }
    }

    // Algolia-Search
    .search {
      input {
        color: $dk-nav-text-color;
        background-color: lighten($dk-nav-background-color, 5);
        &:hover,
        &:focus {
          background-color: lighten($dk-nav-background-color, 10);
        }
      }
      .algolia-autocomplete {
        color: $dk-algolia-search-box-color;
        .aa-dropdown-menu {
          .branding {
            background-color: $dk-page-background-color;
          }
          .aa-suggestion {
            span {
              background-color: $dk-algolia-search-box-background-color;
              &:hover,
              &:focus {
                background-color: darken($dk-algolia-search-box-background-color, 2);
              }
              .fa {
                color: $dk-algolia-search-box-icon-color;
              }
            }
          }
        }
        .aa-input-search {
          border: 1px solid $dk-algolia-border-color;
        }
        .aa-input-icon {
          fill: $dk-algolia-border-color;
        }
        .aa-dropdown-menu {
          background-color: #fff;
          border: 1px solid rgba($dk-algolia-border-color, 0.6);
        }
        .aa-suggestion + .aa-suggestion {
          border-top: 1px solid rgba($dk-algolia-border-color, 0.6);
        }
        .aa-suggestions-category {
          border-bottom: 1px solid rgba($dk-algolia-border-color, 0.6);
          border-top: 1px solid rgba($dk-algolia-border-color, 0.6);
        }
      }
    }
  }

  header {
    background-color: $dk-base-color;
    color: $dk-header-text-color;
    .container {
      &:after {
        background: rgba(255, 255, 255, 0.1);
      }
    }
    .logo {
      background-color: $dk-logo-color;
      border: 5px $dk-logo-color solid;
      color: $dk-logo-color;
      .overlay {
        background-color: $dk-bubble-hover-color;
      }
    }
    .selectors {
      .light-dark-mode {
        background-color: $dk-special-color;
        button {
          color: $dk-header-text-color;
        }
      }
      .languages {
        background-color: $dk-special-color;
        a {
          color: $dk-header-text-color;
        }
      }
    }
    .toggler {
      background: $dk-special-color;
    }
  }
  .main {
    &:before {
      background: $dk-bubble-color;
    }
    &:after {
      background: $dk-bubble-color;
    }
    .article-wrapper {
      .bubble {
        background-color: $dk-bubble-background-color;
        border: 3px solid $dk-bubble-color;
        color: $dk-bubble-color;
        &:hover {
          background-color: $dk-highlight-color;
          color: $dk-bubble-background-color;
        }
      }
    }
  }

  article {
    background-color: $dk-article-background-color;
    // :before and :after to generate the < pointer
    &:before {
      border-right-color: #ddd;
    }
    &:after {
      border-right-color: #fff;
    }
    .content {
      h1 {
        a {
          &:hover {
            color: $dk-highlight-color;
          }
        }
      }
      .meta {
        color: $dk-meta-text-color;
        border-bottom: 3px double $dk-meta-border-color;
        a {
          color: inherit;
          font-style: normal;
          &:hover {
            color: $dk-highlight-color;
          }
        }
      }
      a {
        color: $dk-highlight-color;
      }
      a.more {
        color: $dk-highlight-color;
      }
      .archive-list {
        ul {
          li {
            border-bottom: 1px solid #eee;
          }
          a {
            color: $dk-highlight-color;
            span {
              color: $dk-meta-text-color;
            }
            &:hover {
              color: $dk-base-color;
            }
          }
        }
      }
      blockquote {
        background-color: lighten($dk-article-background-color,8);
        border-left: 0.5em solid #ededed;
      }
      #TableOfContents {
        li {
          color: $dk-text-color;
          a {
            &:hover {
              color: $dk-highlight-color;
            }
          }
        }
      }
    }
    .footer {
      // background: transparentize($dk-base-color, 0.2);
      background: transparentize($base-color, 0.2);
      .tags {
        .links {
          a:not(:last-child):after {
            color: $dk-text-color !important;
          }
        }
      }
      .languages {
        .links {
          a:not(:last-child):after {
            color: $dk-text-color !important;
          }
        }
      }
    }

    // Quotes
    &.quote {
      background-color: $dk-special-color;
      &:after {
        border-right-color: $dk-special-color;
      }
      blockquote {
        color: $dk-text-color;
      }
    }

    // Gallery
    &.gallery {
      .flexslider {
        .flex-direction-nav a {
          &:before {
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.5);
          }
        }
      }
    }

    // Link
    &.link {
      background-color: $dk-special-color;
      &:after {
        border-right-color: $dk-special-color;
      }
      &:hover {
        background-color: $dk-highlight-color;
        color: #fff;
        a {
          color: $dk-bubble-background-color;
        }
        &:after {
          border-right-color: $dk-highlight-color;
        }
      }
     @include featuredImage();
     a {
       color: $dk-text-color;
     }
   }
 }
 .paginator {
   a {
     background-color: $dk-bubble-background-color;
     color: $dk-bubble-color;
     &:hover {
       background-color: $dk-highlight-color;
     }
   }
 }

 footer {
   border-top: 3px solid $dk-footer-border-color;
   border-bottom: 3px solid $dk-footer-border-color;
   background-color: $dk-footer-background-color;
   .container {
     strong {
       color: $dk-footer-headline-color;
     }
     ul {
       a {
         color: $dk-highlight-color;
         &:hover {
           // color: lighten($dk-base-color, 70);
           color: lighten($dk-page-background-color, 70);
         }
       }
     }
     .right {
       .external-profiles {
         a {
           color: $dk-footer-headline-color;
           &:hover {
             color: $dk-highlight-color;
           }
         }
       }
       .languages {
         a {
           color: $dk-highlight-color;
           &:hover {
             color: $dk-text-color;
           }
           &:not(:last-child):after {
             color: $dk-text-color !important;
           }
         }
       }
     }
   }
 }
 .credits {
   .container {
     color: $dk-bubble-color;
   }
 }
}
